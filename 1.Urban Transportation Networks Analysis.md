## Ch1 Urban Transportation Networks Analysis

众多出行者的**<u>选择</u>**（travel decisions），包括出行的目的地、时间、交通方式、以及路径等等方面，决定了城市的总体交通量。出行者选择受到道路**<u>拥挤情况</u>**（congestion）的影响，当某种方式的某个节点或路径存在拥挤时，出行者选择它的意愿自然会下降；反过来说，道路的拥挤情况本质上由出行者的选择所决定，两者相互作用的最终结果应当是整个交通系统的**<u>均衡</u>**（equilibrium）状态。

本书的主要内容是通过建模手段，描述分析 travel decisions 和 congestion 的相互作用机制，从而获得城市交通网络的交通流特征（flow pattern）。模型的输入包括：

- 运输设施（streets, intersections, transit lines, and etc.）
- 管理政策（policy）
- 出行需求（demand）

#### 1.1 Equilibrium analysis of transportation systems

##### How to understand Equilibrium?

本节的开始，作者首先回答了一个问题：**为什么要从系统（或称网络）的角度分析城市交通？**

答案是城市交通系统中存在**连锁效应**（ripple effect），局部的设施、政策、和OD的改变会影响整个系统的flow pattern。作者以拓宽某条道路为例，考虑出行者的选择偏好，新拓宽的道路可能会承载比预想更多的交通量，与此同时，其他与该道路相连的道路会更拥挤，与该道路平行的道路反而会通畅；进而这种变化会propagate到整个网络上；最终当 ripple effect 逐渐弱化后，系统维持了新的平衡状态，这种平衡状态即被称为**均衡**（equilibrium）。

从经济学的角度理解均衡，简而言之，商品首先存在一种Demand/Supply均衡，当价格为均衡价格 $P^{*}$ 时，供需不再变化；但同时除价格外，需求还受其他可变因素的影响，例如加油站的需求水平随排队时间增加而减弱，这就产生了另一层Demand/Performance均衡。在分析Demand/Performance均衡时需要假定价格恒定，换言之，它是Demand/Supply均衡的一个special case。

引申到交通分析上，本质上交通运输行为可以理解成一种服务，而服务水平的高低（例如道路的通行时间、乘坐交通工具的舒适度）通常是flow-dependent的，所以在分析中需要定量表示（1）服务水平随流量的变化情况，以及（2）需求量随服务水平的变化情况。这种Demand/Performance均衡分析需要假定其他影响需求的因素（价格、时刻、设施等）不变，所以也是一个special case。

![image-20220130234341278](https://picgo-1306169978.cos.ap-nanjing.myqcloud.com/20220130234348.png)![image-20220130235649484](https://picgo-1306169978.cos.ap-nanjing.myqcloud.com/20220130235649.png)

#### 1.2 Network representation

交通网络通常用图结构表征，图中包含节点（nodes/vertices）和边（links/edges），交通流具有方向性，因此图一般是directed graph。

在进行交通网络分析时，比较重要的是link performance function，图中的边被赋予阻抗（impedance）属性，可以代表上文所说的link的服务水平。阻抗与流量相关，直观的说，流量越大阻抗越大。刻画link阻抗的指标非常多样，但一般以**通行时间**作为主要指标。下图的BPR function是常用的link performance function。

![image-20220131004820383](https://picgo-1306169978.cos.ap-nanjing.myqcloud.com/20220131004820.png)

##### Representation of the Urban Road Network 

对于同一个现实中的交通网络，可能存在多种不同的图表征方式，而不同表征方式的表征能力可能有巨大的区别。以一个十字路口为例，下图（b）相对（a）而言，具有更多的nodes和links，因此能够表示更多细化的信息，包括转向的限制、不同方向通行时间的差异等等，但与此同时扩大了图的规模，可能需要更大的计算量。所以说需要针对问题场景采取合理的表征方式。

![image-20220131010015988](https://picgo-1306169978.cos.ap-nanjing.myqcloud.com/20220131010016.png)

##### Representation of the Transit Network 

